{"version":3,"sources":["images/logo.svg","contexts/CurrentUserContext.js","components/Header.js","components/Card.js","images/profile-img.png","components/Main.js","components/Footer.js","components/PopupWithImage.js","components/EditProfilePopUp.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeletePopup.js","components/Login.js","components/SignUp.js","utils/config.js","utils/auth.js","components/ProtectedRoute.js","components/InfoTooltip.js","utils/api.js","utils/formvalidator.js","components/App.js","serviceWorker.js","index.js"],"names":["CurrentUserContext","React","createContext","withRouter","props","currentUser","useContext","location","useLocation","useState","currentLocation","setLocation","showMenu","setShowMenu","useEffect","pathname","className","loggedIn","src","logo","alt","type","onClick","email","login","to","Card","isLiked","setIsLiked","isOwn","setIsOwn","likesLength","setlikesLength","card","owner","_id","cardDeleteButtonClassName","likes","some","i","cardLikeButtonClassName","length","onCardDelete","link","onCardClick","name","onCardLike","Main","onEditAvatar","avatar","defaultAvatar","onEditProfile","aria-label","about","onAddPlace","cards","map","Footer","PopupWithImage","isOpen","e","onOutsideClick","onClose","EditProfilePopUp","loading","setLoading","setName","description","setDescription","setFormInvalid","formRef","useRef","nameError","setNameError","descriptionError","setDescriptionError","formInvalid","onSubmit","preventDefault","onUpdateUser","onChange","formValidator","current","ref","id","required","minLength","maxLength","placeholder","value","target","fieldValidator","disabled","EditAvatarPopup","setLink","linkError","setLinkError","onUpdateAvatar","AddPlacePopup","DeletePopup","onDelete","setEmail","password","setPassword","emailError","setEmailError","passwordError","setPasswordError","logInUser","registerUser","baseURL","auth","fetch","BASE_URL","method","headers","body","JSON","stringify","then","res","ok","json","Promise","reject","statusText","response","token","localStorage","setItem","getItem","ProtectedRoute","Component","component","InfoTooltip","success","api","this","authorization","cardId","liked","deleteLike","addLike","form","selector","Array","from","querySelectorAll","inputElement","validity","valid","input","errorFunction","validationMessage","App","history","useHistory","selectedCard","setselectedCard","setcurrentUser","setCards","setloggedIn","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setisEditAvatarPopupOpen","isDeletePopupOpen","setisDeletePopupOpen","isCardOpen","setisCardOpen","isToolTipOpen","setisToolTipOpen","isSuccess","setisSuccess","handleLogin","isLoggedIn","removeItem","handleDisplayInfoTooltip","handleLogInUser","push","closeAllPopups","handleClickOutsideForm","includes","handleKeyPress","useCallback","key","window","addEventListener","removeEventListener","setToken","getUser","data","getCards","catch","err","console","log","Provider","path","register","changeLikeCardStatus","newCard","newCards","c","alert","finally","editProfile","addCard","editAvatar","deleteCard","filter","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.b481ce3b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6c4fd428.svg\";","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { Link, withRouter, useLocation } from 'react-router-dom';\r\nimport logo from '../images/logo.svg';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Header(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const location = useLocation();\r\n  const [currentLocation, setLocation] = React.useState('login');\r\n  const [showMenu, setShowMenu] = React.useState(false);\r\n\r\n  function logOutUser(){\r\n    props.login(false);\r\n    setShowMenu(false);\r\n  }\r\n\r\n  function handleShowMenu(){\r\n    setShowMenu(!showMenu);\r\n  }\r\n\r\n  //change the display depending on the current page. Default is signin page\r\n  //what to display is determined in the return statement\r\n  React.useEffect(() => {\r\n    if(location.pathname === '/signup') { \r\n      setLocation('signup');\r\n    }\r\n    else if(location.pathname === '/login'){\r\n      setLocation('login');\r\n    }\r\n  }, [location]);\r\n  \r\n  return (\r\n    <header className={`header ${!props.loggedIn && 'header_state_loggedOut'}`}>\r\n      <div className=\"header__logo-menu\">\r\n        <img className=\"header__logo\" src={logo} alt=\"logo\" />\r\n        {props.loggedIn && <button className={`header__menu-icon ${showMenu  && 'header__menu-icon_state_closed'}`} type=\"button\" onClick={handleShowMenu}></button>}\r\n      </div>\r\n      <nav className={`header__nav ${(!showMenu && props.loggedIn) && 'header__nav_state_closed'}`}>\r\n        {props.loggedIn ? \r\n        //logged in\r\n        <><p className=\"header__email\">{currentUser.email}</p>\r\n        <button className=\"header__link_type_logout\" type=\"button\" onClick={logOutUser}>Log out</button></> : \r\n        //logged out\r\n        currentLocation === 'login' ? \r\n          //login header\r\n          <Link to=\"./signup\" className=\"header__link\">Sign up</Link>: \r\n          //signup header\r\n          <Link to=\"./login\" className=\"header__link\">Log in</Link>}\r\n      </nav>\r\n    </header>\r\n  )}\r\n\r\nexport default withRouter(Header);","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nfunction Card(props){\r\n  \r\n  const [isLiked, setIsLiked] = React.useState(false);\r\n  const [isOwn, setIsOwn] = React.useState(false);\r\n  const [likesLength, setlikesLength] = React.useState(0);\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  } \r\n\r\n  function handleLike() {\r\n    props.onCardLike(props.card);\r\n  } \r\n\r\n  function handleDelete() {\r\n    props.onCardDelete(props.card);\r\n  } \r\n\r\n  //control delete button visibility\r\n  React.useEffect(() => {\r\n    if(props.card.owner){\r\n      props.card.owner === currentUser._id ? setIsOwn(true) : setIsOwn(false);\r\n    }\r\n  },[props.card])\r\n  //const isOwn = props.card.owner._id === currentUser._id;\r\n\r\n  const cardDeleteButtonClassName = (\r\n    `element__delete-button ${isOwn && 'element__delete-button_visibility_visible'}`\r\n  ); \r\n\r\n  //check if card was already liked\r\n  React.useEffect(() => {\r\n    if(props.card.likes){\r\n      props.card.likes.some(i => i === currentUser._id) ? setIsLiked(true) : setIsLiked(false);\r\n    }\r\n  },[props.card])\r\n  //const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n\r\n  const cardLikeButtonClassName = `element__like-button ${isLiked && 'element__like-button_stateliked'}`; \r\n\r\n  //get number of likes\r\n  React.useEffect(() => {\r\n    if(props.card.likes){\r\n      setlikesLength(props.card.likes.length);\r\n    }\r\n  },[props.card])\r\n\r\n  return(\r\n  <>\r\n  <div className={cardDeleteButtonClassName} onClick={handleDelete} ></div>\r\n  <img className=\"element__image\" src={props.card.link} onClick={handleClick} alt=\"place\"/>\r\n  <div className=\"element__text\">\r\n    <h2 className=\"element__title\">{props.card.name}</h2>\r\n    <div className=\"element__likes-container\">\r\n      <button className={cardLikeButtonClassName} onClick={handleLike}></button>\r\n      <p className=\"element__likes-display\">{likesLength}</p>\r\n    </div>\r\n  </div>\r\n  </>\r\n  )\r\n}\r\n\r\nexport default Card;","export default __webpack_public_path__ + \"static/media/profile-img.074e6423.png\";","import React from 'react';\r\nimport Card from './Card.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nimport defaultAvatar from '../images/profile-img.png';\r\n\r\n\r\nfunction Main(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  \r\n  return (\r\n  <>\r\n  <section className=\"profile\">\r\n    <div className=\"profile__image-container\">\r\n      <div className=\"profile__image-overlay\" onClick={props.onEditAvatar}></div>\r\n      <img className=\"profile__image\" src={currentUser.avatar ? currentUser.avatar : defaultAvatar} alt=\"profile-img\"/>\r\n    </div>\r\n    <div className=\"profile__info\">\r\n  <h1 className=\"profile__name\">{currentUser.name ? currentUser.name : 'Jacques Cousteau' }</h1>\r\n      <button className=\"profile__edit-button\" onClick={props.onEditProfile} aria-label=\"edit profile\"></button>       \r\n  <p className=\"profile__description\">{currentUser.about ? currentUser.about : 'Explorer'}</p>     \r\n    </div>\r\n    <button className=\"profile__add-button\" onClick={props.onAddPlace}></button>\r\n  </section>\r\n\r\n  <section className=\"elements\">\r\n    {props.cards.length > 0 ?\r\n     props.cards.map(card => (\r\n      <div className=\"element\" key={card._id}>\r\n        <Card card={card} onCardClick = {props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete}/>\r\n      </div>\r\n    ))\r\n    \r\n    :\r\n    //show loading screen if cards haven't loaded\r\n    <div className=\"loading\">Add your first place with the + button!</div>\r\n    }\r\n  </section>\r\n  </>\r\n)}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n  <footer className=\"footer\">\r\n    <p className=\"footer__copyright\">Â© 2020 Around The U.S.</p>\r\n  </footer>\r\n  )\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nfunction PopupWithImage(props) {\r\n\r\n  return (\r\n    <section className={`popup popup_type_image ${props.isOpen && 'popup_state_opened'}`}  onClick={(e)=>{props.onOutsideClick(e,'popup popup_type_image')}}>\r\n    <div className=\"popup__container\">\r\n      <div className=\"popup__image-modal\">\r\n        <button className=\"popup__close popup__close_type_image\" type=\"button\" onClick={props.onClose}></button>  \r\n        <figure>\r\n          <img className=\"popup__image\" src={props.card && props.card.link} alt=\"place\"/>\r\n          <figcaption className=\"popup__image-caption\"></figcaption>\r\n        </figure>\r\n      </div>\r\n    </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default PopupWithImage;","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopUp(props){\r\n    //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n  // Subscription to the context\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n    //form field\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  //reset form on open\r\n  React.useEffect(()=>{\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n\r\n    //set default values\r\n    currentUser.name && setName(currentUser.name);\r\n    currentUser.about && setDescription(currentUser.about);\r\n  },[props.isOpen])\r\n  \r\n  function handleSubmit(e) {\r\n    //check if the form is valid before sending\r\n    if(!formInvalid){\r\n      e.preventDefault();   \r\n      // Pass the values of the managed components to the external handler\r\n      props.onUpdateUser(name, description);\r\n\r\n      //set loading\r\n      setLoading(true);\r\n    }\r\n  } \r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [nameError, setNameError] = React.useState('');\r\n  const [descriptionError, setDescriptionError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\nfunction handleName(e) {\r\n  //set value\r\n  setName(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setNameError)\r\n}\r\n\r\nfunction handleDescription(e) {\r\n  //set value\r\n  setDescription(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setDescriptionError)\r\n}\r\n\r\n  function validateForm(){\r\n    props.formValidator(formRef.current,'.popup__input') ? setFormInvalid(true) : setFormInvalid(false);\r\n  }\r\n\r\n  return(\r\n    <section className={`popup popup_type_edit-profile ${props.isOpen  && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_edit-profile')}}>\r\n    <div className=\"popup__container\">\r\n      <form className={`popup__form popup__form_type_edit-profile`} onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n        <button className={`popup__close popup__close_type_edit-profile`} type=\"button\" onClick={props.onClose}></button>  \r\n        <h4 className=\"popup__title\">Edit Profile</h4>\r\n        <input className={`popup__input popup__input-name ${nameError !=='' && 'popup__input_type_error'}`} id=\"name-input\" type=\"text\" name=\"name\" required minLength=\"2\" maxLength=\"40\" placeholder={currentUser.name} value={name} onChange={handleName}/>\r\n          <span className={`popup__input-error\" id=\"name-input-error ${nameError !=='' && 'popup__error_visible'}`}>{nameError}</span>\r\n        <input className={`popup__input popup__input-description ${descriptionError !=='' && 'popup__input_type_error'}`} id=\"description-input\" type=\"text\" name=\"description\" required minLength=\"2\" maxLength=\"200\" placeholder={currentUser.about} value={description} onChange={handleDescription}/>\r\n          <span className={`popup__input-error\" id=\"description-input-error ${descriptionError !=='' && 'popup__error_visible'}`}>{descriptionError}</span>\r\n        <button className={`popup__submit popup__edit-profile-submit ${formInvalid && 'popup__submit_disabled'}`} disabled={formInvalid} type=\"submit\">{`${loading ? 'Loading...':'Save'}`}</button>\r\n      </form>\r\n    </div>\r\n  </section>  \r\n  )\r\n}\r\n\r\nexport default EditProfilePopUp;","import React from 'react';\r\n\r\nfunction EditAvatarPopup(props){\r\n  //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n  //form field\r\n  const [link, setLink] = React.useState('');\r\n\r\n  //reset form on open\r\n  React.useEffect(()=>{\r\n    setLink('');\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n  },[props.isOpen])\r\n\r\n  function handleSubmit(e) {\r\n    if(!formInvalid){\r\n      e.preventDefault();\r\n      props.onUpdateAvatar(link);\r\n      //set loading\r\n      setLoading(true);\r\n    }\r\n  } \r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [linkError, setLinkError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\n  function handleChange(e) {\r\n      //set value\r\n      setLink(e.target.value);\r\n      //set error\r\n      props.fieldValidator(e.target, setLinkError)\r\n  }\r\n  \r\n    function validateForm(){\r\n      props.formValidator(formRef.current,'.popup__input')? setFormInvalid(true) : setFormInvalid(false);\r\n    }\r\n\r\n  return(\r\n    <section className={`popup popup_type_edit-avatar ${props.isOpen  && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_edit-avatar')}}>\r\n    <div className=\"popup__container\">\r\n      <form className={`popup__form popup__form_type_edit-avatar`} onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n        <button className={`popup__close popup__close_type_edit-avatar`} type=\"button\" onClick={props.onClose}></button>  \r\n        <h4 className=\"popup__title\">Change profile picture</h4>\r\n        <input className={`popup__input popup__input-avatar ${linkError !=='' && 'popup__input_type_error'}`} id=\"avatar-input\" type=\"url\" name=\"avatar\"  value={link} placeholder=\"Image URL\" required onChange={handleChange}/>\r\n      <span className={`popup__input-error ${linkError !=='' && 'popup__error_visible'}`} id=\"avatar-input-error\">{linkError}</span>\r\n        <button className={`popup__submit popup__edit-avatar-submit ${formInvalid && 'popup__submit_disabled'}`} type=\"submit\" disabled={formInvalid}>{`${loading ? 'Loading...':'Save'}`}</button>\r\n      </form>\r\n    </div>\r\n  </section> \r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\n\r\nfunction AddPlacePopup(props){\r\n  //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n  \r\n  //fields\r\n  const [name, setName] = React.useState('');\r\n  const [link, setLink] = React.useState('');\r\n\r\n  function handleSubmit(e) {\r\n    if(!formInvalid){\r\n      e.preventDefault();\r\n      // Pass the values of the managed components to the external handler\r\n      props.onAddPlace(name, link);\r\n      //set loading\r\n      setLoading(true);\r\n    }\r\n  } \r\n\r\n  React.useEffect(()=>{\r\n    setName('');\r\n    setLink('');\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n  },[props.isOpen])\r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [nameError, setNameError] = React.useState('');\r\n  const [linkError, setLinkError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\n  function handleName(e) {\r\n    //set value\r\n    setName(e.target.value);\r\n    //set error\r\n    props.fieldValidator(e.target, setNameError)\r\n  }\r\n\r\n  function handleLink(e) {\r\n    //set value\r\n    setLink(e.target.value);\r\n    //set error\r\n    props.fieldValidator(e.target, setLinkError)\r\n  }\r\n  \r\n    function validateForm(){\r\n      props.formValidator(formRef.current,'.popup__input')? setFormInvalid(true) : setFormInvalid(false);\r\n    }\r\n\r\n  return(\r\n    <section className={`popup popup_type_add-card ${props.isOpen  && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_add-card')}}>\r\n    <div className=\"popup__container\">\r\n      <form className={`popup__form popup__form_type_add-card`} onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n        <button className={`popup__close popup__close_type_add-card`} type=\"button\" onClick={props.onClose}></button>  \r\n        <h4 className=\"popup__title\">New Place</h4>\r\n        <input className={`popup__input popup__input-card-name ${nameError !=='' && 'popup__input_type_error'}`} id=\"card-name-input\" type=\"text\" name=\"name\" placeholder=\"Title\" required minLength=\"1\" maxLength=\"30\" value={name} onChange={handleName}/>\r\n      <span className={`popup__input-error\" id=\"card-name-input-error ${nameError !=='' && 'popup__error_visible'}`}>{nameError}</span>\r\n      \r\n      <input className={`popup__input popup__input-card-url ${linkError !=='' && 'popup__input_type_error'}`} id=\"url-input\" type=\"url\" name=\"link\" placeholder=\"Image URL\" required value={link} onChange={handleLink}/>\r\n      <span className={`popup__input-error ${linkError !=='' && 'popup__error_visible'}`} id=\"url-input-error\">{linkError}</span>\r\n  <button className={`popup__submit popup__add-card-submit ${formInvalid && 'popup__submit_disabled'}`} disabled={formInvalid} type=\"submit\">{`${loading ? 'Loading...':'Create'}`}</button>\r\n      </form>\r\n    </div>\r\n  </section>  \r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction DeletePopup(props){\r\n  //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  //reset form on open\r\n  React.useEffect(()=>{\r\n    setLoading(false);\r\n  },[props.isOpen])\r\n\r\n  function handleSubmit(e){\r\n    e.preventDefault();\r\n    props.onDelete(props.card._id);\r\n\r\n    //set loading\r\n    setLoading(true);\r\n  }\r\n\r\n\r\n  return(\r\n    <section className={`popup popup_type_delete ${props.isOpen && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_delete')}}>\r\n      <div className=\"popup__container\">\r\n        <form className=\"popup__form\" onSubmit={handleSubmit}>\r\n          <button className=\"popup__close popup__close_type_add-card\"></button>  \r\n          <h4 className=\"popup__title popup__title_type_no-bottom-margin\">Are you sure?</h4>\r\n          <button className=\"popup__submit popup__delete-submit\" type=\"submit\">{`${loading ? 'Loading...':'Delete'}`}</button>      \r\n        </form>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default DeletePopup;","import React from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\n\r\nfunction Login(props){\r\n  //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n  //form field\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  //reset form on open\r\n  React.useEffect(()=>{\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n  },[])\r\n  \r\n  function handleSubmit(e) {\r\n    e.preventDefault();   \r\n    if(!formInvalid){\r\n      //check if the form is valid before sending\r\n      //login user\r\n      setLoading(true);\r\n      props.logInUser(email, password);\r\n      //set loading\r\n      setLoading(false);\r\n    }\r\n  } \r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [emailError, setEmailError] = React.useState('');\r\n  const [passwordError, setPasswordError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\n\r\nfunction handleEmail(e) {\r\n  //set value\r\n  setEmail(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setEmailError)\r\n}\r\n\r\nfunction handlePassword(e) {\r\n  //set value\r\n  setPassword(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setPasswordError)\r\n}\r\n\r\nfunction validateForm(){\r\n  props.formValidator(formRef.current,'.login__input') ? setFormInvalid(true) : setFormInvalid(false);\r\n}\r\n\r\n  return(\r\n    <section className=\"login\">\r\n    <div className=\"login__container\">\r\n      <form className=\"login__form\" onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n      <h1 className=\"login__title\">Log in</h1>\r\n        <input className={`login__input ${emailError !=='' && 'popup__input_type_error'}`} id=\"email-input\" type=\"email\" name=\"email\" minLength=\"2\" maxLength=\"40\" required placeholder=\"Email\" value={email} onChange={handleEmail}/>\r\n          <span className={`popup__input-error  ${emailError !=='' && 'popup__error_visible'}`}>{emailError}</span>\r\n        <input className={`login__input ${passwordError !=='' && 'popup__input_type_error'}`} id=\"password-input\" type=\"password\" name=\"password\" minLength=\"7\" maxLength=\"12\" required placeholder=\"Password\" value={password} onChange={handlePassword}/>\r\n          <span className={`popup__input-error ${passwordError !=='' && 'popup__error_visible'}`}>{passwordError}</span>\r\n        <button className={`login__submit ${formInvalid && 'login__submit_disabled'}`} disabled={formInvalid} type=\"submit\">{`${loading ? 'Loading...':'Log In'}`} </button>\r\n      </form>\r\n      <p className=\"login__caption\">Not a member yet? Sign up <Link to=\"./signup\" className=\"login__link\">here</Link>!</p>\r\n    </div>\r\n  </section>  \r\n  )\r\n}\r\n\r\nexport default withRouter(Login);","import React from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\n\r\nfunction SignUp(props){\r\n    //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n    //form field\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  //reset form on open\r\n  React.useEffect(()=>{\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n  },[])\r\n  \r\n  function handleSubmit(e) {\r\n    //check if the form is valid before sending\r\n    e.preventDefault();\r\n    if(!formInvalid){   \r\n      //register user\r\n      setLoading(true);\r\n      props.registerUser(email, password);\r\n      setLoading(false);\r\n    }\r\n  } \r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [emailError, setEmailError] = React.useState('');\r\n  const [passwordError, setPasswordError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\nfunction handleEmail(e) {\r\n  //set value\r\n  setEmail(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setEmailError)\r\n}\r\n\r\nfunction handlePassword(e) {\r\n  //set value\r\n  setPassword(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setPasswordError)\r\n}\r\n\r\nfunction validateForm(){\r\n  props.formValidator(formRef.current,'.login__input') ? setFormInvalid(true) : setFormInvalid(false);\r\n}\r\n\r\n  return(\r\n    <section className=\"login\">\r\n    <div className=\"login__container\">\r\n      <form className=\"login__form\" onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n      <h1 className=\"login__title\">Sign up</h1>\r\n        <input className={`login__input ${emailError !=='' && 'popup__input_type_error'}`} id=\"email-input\" type=\"email\" name=\"email\" minLength=\"2\" maxLength=\"40\" required placeholder=\"Email\" value={email} onChange={handleEmail}/>\r\n          <span className={`popup__input-error  ${emailError !=='' && 'popup__error_visible'}`}>{emailError}</span>\r\n        <input className={`login__input ${passwordError !=='' && 'popup__input_type_error'}`} id=\"password-input\" type=\"password\" name=\"password\" minLength=\"7\" maxLength=\"12\" required placeholder=\"Password\" value={password} onChange={handlePassword}/>\r\n          <span className={`popup__input-error ${passwordError !=='' && 'popup__error_visible'}`}>{passwordError}</span>\r\n        <button className={`login__submit ${formInvalid && 'login__submit_disabled'}`} disabled={formInvalid} type=\"submit\">{`${loading ? 'Loading...':'Sign Up'}`}</button>\r\n      </form>\r\n      <p className=\"login__caption\">Already a member? Log in <Link to=\"./login\" className=\"login__link\">here</Link>!</p>\r\n    </div>\r\n  </section>  \r\n  )\r\n}\r\n\r\nexport default withRouter(SignUp);","/* external */\r\n// export const token = '81e205aa-8028-44df-98a0-52d33fa82698';\r\n// export const groupId = 'group-4';\r\n// export const baseURL ='https://register.nomoreparties.co';\r\n/* backend */\r\nexport const baseURL ='http://localhost:5000';\r\n","import {baseURL as BASE_URL} from './config';\r\n\r\nclass Auth{\r\n  register(email, password){\r\n    return fetch(`${BASE_URL}/signup`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\"email\" : email, \"password\" : password})\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  login(email, password){\r\n    return fetch(`${BASE_URL}/signin`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\"email\" : email, \"password\" : password})\r\n    })\r\n    .then((response) => response.json())\r\n    .then((res) => {\r\n      if(res.token){\r\n        localStorage.setItem('token', res.token);\r\n        return res;\r\n      }\r\n    })\r\n  }\r\n\r\n  authorize(){\r\n    return fetch(`${BASE_URL}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'authorization': `${localStorage.getItem('token')}`\r\n      }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })  \r\n  }\r\n\r\n}\r\n\r\nexport const auth = new Auth();","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to='/login' />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute; ","import React from 'react';\r\n\r\nfunction InfoTooltip(props){\r\n\r\n  return(\r\n    <section className={`popup popup_type_tooltip ${props.isOpen && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_tooltip')}}>\r\n      <div className=\"popup__container\">\r\n        <div className=\"popup__body\">\r\n        <button className=\"popup__close popup__close_type_tooltip\" type=\"button\" onClick={props.onClose}></button>  \r\n        <div className={`${props.success ? 'popup__icon_type_success' : 'popup__icon_type_failure'}`}></div>     \r\n        <h4 className=\"popup__title popup__title_type_bottom-margin-60\">{props.success ? `Success! You have now been registered`:`Oops, something went wrong! Please try again.`}</h4>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default InfoTooltip;","//import {token, groupId} from './config';\r\nimport {baseURL} from './config';\r\nclass Api{\r\n  constructor({baseURL}){\r\n    this.baseURL = baseURL;\r\n  }\r\n\r\n  setToken(token){\r\n    this.token = token;\r\n  }\r\n  \r\n  /* API FUNCTIONS */\r\n  getUser(){\r\n    return fetch(`${this.baseURL}/users/me`,{\r\n      headers: {\r\n        authorization: this.token\r\n      }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n  \r\n  getCards(){\r\n    return fetch(`${this.baseURL}/cards`,{\r\n      headers: {\r\n        authorization: this.token\r\n      }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  editProfile(name, about){\r\n    return fetch(`${this.baseURL}/users/me`,{\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          name: name,\r\n          about: about\r\n        })\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  editAvatar(link){\r\n    return fetch(`${this.baseURL}/users/me/avatar`,{\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          avatar: link\r\n        })\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`editAvatar Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  addCard(name, link){\r\n    return fetch(`${this.baseURL}/cards`,{\r\n      method: \"POST\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          name: name,\r\n          link: link\r\n        })\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  deleteCard(cardId){\r\n    return fetch(`${this.baseURL}/cards/${cardId}`,{\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, liked){\r\n    return liked ? this.deleteLike(cardId) : this.addLike(cardId);\r\n  }\r\n\r\n  addLike(cardId){\r\n    return fetch(`${this.baseURL}/cards/${cardId}/likes`,{\r\n      method: \"PUT\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`editLikes Error: ${res.statusText}`);\r\n    })\r\n\r\n  }\r\n\r\n  deleteLike(cardId){\r\n    return fetch(`${this.baseURL}/cards/${cardId}/likes`,{\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`editLikes Error: ${res.statusText}`);\r\n    })\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseURL : baseURL, \r\n});\r\n\r\nexport {api};","class FormValidator{\r\n  //validate a form\r\n  formValidator(form, selector){\r\n    const inputList = Array.from(form.querySelectorAll(selector));\r\n    return inputList.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    }) ? true : false;\r\n  }\r\n\r\n  //valid individual field\r\n  fieldValidator(input, errorFunction){\r\n    !input.validity.valid ? errorFunction(input.validationMessage) : errorFunction('');\r\n  }\r\n}\r\n\r\nexport const formValidator = new FormValidator();\r\n","import React from 'react';\r\nimport { Route, Switch, useHistory, Redirect } from 'react-router-dom';\r\n\r\n//component\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithImage from './PopupWithImage';\r\nimport EditProfilePopUp from './EditProfilePopUp';\r\nimport EditAvatarPopUp from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport DeletePopup from './DeletePopup';\r\n\r\n//login\r\nimport Login from './Login';\r\nimport SignUp from './SignUp';\r\nimport {auth} from '../utils/auth';\r\nimport ProtectedRoute from './ProtectedRoute'\r\nimport InfoTooltip from './InfoTooltip';\r\n\r\n//context\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n//util\r\nimport {api} from '../utils/api';\r\nimport {formValidator} from '../utils/formvalidator'\r\n\r\nfunction App() {\r\n  //history\r\n  const history = useHistory();\r\n\r\n  //state\r\n  const [selectedCard, setselectedCard] = React.useState({link:'#'});\r\n  const [currentUser, setcurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [loggedIn, setloggedIn] = React.useState(false);\r\n\r\n  //isOpen props for popups\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setisEditAvatarPopupOpen] = React.useState(false);\r\n  const [isDeletePopupOpen, setisDeletePopupOpen] = React.useState(false); \r\n  const [isCardOpen, setisCardOpen] = React.useState(false);\r\n  const [isToolTipOpen, setisToolTipOpen] = React.useState(false);\r\n  const [isSuccess, setisSuccess] = React.useState(false);\r\n\r\n  //update user functions\r\n  function handleUpdateUser(name, about){\r\n    api.editProfile(name, about)\r\n    .then((data)=>{\r\n      setcurrentUser(data);\r\n    })\r\n    .catch((err) => { \r\n      console.log(err);  \r\n      alert(err);\r\n    })\r\n    .finally(()=>{closeAllPopups()})\r\n  }\r\n\r\n  function handleUpdateAvatar(link){\r\n    api.editAvatar(link)\r\n    .then((data)=>{\r\n      setcurrentUser(data);\r\n    })\r\n    .catch((err) => { \r\n      console.log(err);\r\n      alert(err);\r\n    })\r\n    .finally(()=>{closeAllPopups()})\r\n  }\r\n  //card functions\r\n  function handleDeleteClick(card){\r\n    setselectedCard(card);\r\n    setisDeletePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(card){\r\n    setisCardOpen(true);\r\n    setselectedCard(card);\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    // Check one more time if this card was already liked\r\n    //const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    const isLiked = card.likes.some(i => i === currentUser._id);\r\n    \r\n    // Send a request to the API and getting the updated card data\r\n    api.changeLikeCardStatus(card._id, isLiked).then((newCard) => {\r\n        // Create a new array based on the existing one and putting a new card into it\r\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n      // Update the state\r\n      setCards(newCards);\r\n    })\r\n    .catch((err) => { \r\n      console.log(err);\r\n      alert(err);\r\n    })\r\n    .finally(()=>{closeAllPopups()})\r\n  } \r\n\r\n  function handleCardDelete(cardId){\r\n    //delete the card\r\n    api.deleteCard(cardId)\r\n    .then(() => { \r\n      const newCards = cards.filter((c)=>{\r\n        return c._id !== cardId;\r\n      }); \r\n      setCards(newCards);\r\n    })\r\n    .catch((err) => { \r\n        console.log(err); \r\n        alert(err);\r\n      })\r\n    .finally(()=>{closeAllPopups()})\r\n  }\r\n  \r\n  //popup functions\r\n  function handleEditProfileClick(){\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick(){\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleEditAvatarClick(){\r\n    setisEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceSubmit(name, link){\r\n    api.addCard(name,link).then((newCard) => { \r\n      setCards([...cards, newCard]); \r\n    })\r\n    .catch((err) => { \r\n        console.log(err); \r\n        alert(err);\r\n      })\r\n    .finally(()=>{closeAllPopups()})\r\n  }\r\n\r\n  //login functions\r\n  function handleLogin(isLoggedIn){\r\n    setloggedIn(isLoggedIn);\r\n    if(!isLoggedIn){\r\n    //delete token\r\n    setcurrentUser({});\r\n    localStorage.removeItem('token');\r\n    }\r\n  }\r\n\r\n  function handleDisplayInfoTooltip(success){\r\n    setisSuccess(success);\r\n    setisToolTipOpen(true);\r\n  }\r\n\r\n  function handleRegisterUser(email, password){\r\n    auth.register(email, password)\r\n    .then((res) => {\r\n      if(res){\r\n        handleDisplayInfoTooltip(true);\r\n        history.push(\"/login\");\r\n        handleLogInUser(email, password);\r\n      }\r\n      else{\r\n        handleDisplayInfoTooltip(false);\r\n      }\r\n    })\r\n  }\r\n\r\n  function handleLogInUser(email, password){\r\n    auth.login(email, password)\r\n    .then((res) => {\r\n      if(res){\r\n        handleLogin(true);\r\n        history.push(\"/\");\r\n      }\r\n      else{\r\n        handleDisplayInfoTooltip(false);\r\n      }\r\n    })\r\n  }\r\n  \r\n  //close and reset popups\r\n  function closeAllPopups(){\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setisEditAvatarPopupOpen(false);\r\n    setisDeletePopupOpen(false);\r\n    setisCardOpen(false);\r\n    setisToolTipOpen(false);\r\n    setselectedCard({link:'#'});\r\n  }\r\n  \r\n  //click outside container \r\n  function handleClickOutsideForm(e, selector){\r\n    if(e.target.className.includes(selector)){\r\n      closeAllPopups();\r\n    }\r\n  }\r\n\r\n  //close window when escape is pressed\r\n  const handleKeyPress = React.useCallback((e) => {\r\n      if(e.key === 'Escape'){ \r\n        closeAllPopups(); \r\n      } \r\n    }, []);\r\n\r\n//add Escape event\r\nReact.useEffect(() => {\r\n    window.addEventListener('keydown', handleKeyPress);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyPress);\r\n    };\r\n  }, [handleKeyPress]);\r\n\r\n    //get user and initial cards\r\n    React.useEffect(()=>{\r\n      //get user from token\r\n      if (localStorage.getItem('token')) {\r\n        const token = localStorage.getItem('token');\r\n        api.setToken(token);\r\n        setloggedIn(true);\r\n        api.getUser()\r\n        .then((data)=>{\r\n          setcurrentUser(data);\r\n          //get cards\r\n          api.getCards()\r\n          .then((data) => {  \r\n            setCards(data)\r\n          })\r\n          .catch((err) => { \r\n            console.log(err);\r\n          })\r\n        })\r\n        .catch((err) => { \r\n          console.log(err);\r\n        })\r\n      }\r\n      //after loading everything, set loading to false\r\n      setLoading(false);\r\n    },[currentUser, loggedIn])\r\n\r\n  return (\r\n    //show loading message if user and cards are not loaded\r\n  loading ? <div className=\"App page loading\">Loading page...</div> :\r\n\r\n<div className=\"App page\">\r\n<CurrentUserContext.Provider value={currentUser}>\r\n  <Header loggedIn={loggedIn} login={handleLogin}  />\r\n  <Switch>\r\n  <Route path=\"/signup\">\r\n    <SignUp\r\n      formValidator={formValidator.formValidator}\r\n      fieldValidator={formValidator.fieldValidator}\r\n      registerUser={handleRegisterUser}\r\n    />\r\n  </Route>\r\n  <Route path=\"/login\">\r\n  {\r\n    () => !loggedIn ?\r\n    <Login\r\n      formValidator={formValidator.formValidator}\r\n      fieldValidator={formValidator.fieldValidator}\r\n      logInUser={handleLogInUser}\r\n    /> : \r\n    //redirect to main if already logged in\r\n    <Redirect to='/' />\r\n  }\r\n  </Route>\r\n  <ProtectedRoute path=\"*\" \r\n    loggedIn={loggedIn} \r\n    component={Main}\r\n    onEditProfile = {handleEditProfileClick}\r\n    onAddPlace = {handleAddPlaceClick}\r\n    onEditAvatar = {handleEditAvatarClick}\r\n    onCardClick = {handleCardClick}\r\n    card = {selectedCard}\r\n    cards = {cards}\r\n    onCardLike = {handleCardLike}\r\n    onCardDelete = {handleDeleteClick}\r\n  >\r\n  </ProtectedRoute>\r\n  </Switch>\r\n  <Footer />\r\n  <EditProfilePopUp \r\n    isOpen={isEditProfilePopupOpen} \r\n    onClose={closeAllPopups}\r\n    onUpdateUser={handleUpdateUser}\r\n    onOutsideClick={handleClickOutsideForm}\r\n    formValidator={formValidator.formValidator}\r\n    fieldValidator={formValidator.fieldValidator}\r\n  />\r\n\r\n  <AddPlacePopup \r\n    isOpen={isAddPlacePopupOpen} \r\n    onClose={closeAllPopups}\r\n    onAddPlace={handleAddPlaceSubmit}\r\n    onOutsideClick={handleClickOutsideForm}\r\n    formValidator={formValidator.formValidator}\r\n    fieldValidator={formValidator.fieldValidator}\r\n    />\r\n\r\n  <EditAvatarPopUp \r\n    isOpen={isEditAvatarPopupOpen} \r\n    onClose={closeAllPopups}\r\n    onUpdateAvatar={handleUpdateAvatar}\r\n    onOutsideClick={handleClickOutsideForm}\r\n    formValidator={formValidator.formValidator}\r\n    fieldValidator={formValidator.fieldValidator}\r\n    />\r\n  \r\n  <PopupWithImage \r\n    card={selectedCard} \r\n    isOpen={isCardOpen}\r\n    onClose={closeAllPopups}\r\n    onOutsideClick={handleClickOutsideForm}\r\n    />\r\n\r\n  <DeletePopup \r\n    isOpen={isDeletePopupOpen} \r\n    onClose={closeAllPopups}\r\n    card = {selectedCard}\r\n    onDelete = {handleCardDelete}\r\n    onOutsideClick={handleClickOutsideForm}\r\n  /> \r\n\r\n  <InfoTooltip \r\n    isOpen={isToolTipOpen} \r\n    onClose={closeAllPopups}\r\n    onOutsideClick={handleClickOutsideForm}\r\n    success={isSuccess}\r\n  />\r\n</CurrentUserContext.Provider>\r\n</div>\r\n)}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}